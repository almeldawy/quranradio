<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <title>Radio du Saint Coran - Arabie Saoudite</title>
    
    <link rel="manifest" href="manifest.json">
    
    <link rel="apple-touch-icon" href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhwzbQZ3iHzbzjW6-akYWlYamGn1hbWq2_hidaZDTD3I4nIUjhNl4ah9F1T3akY1ZTdSD80KXCKSKCHnOsWHMgFl-VSezptKUZdx5FpVnqnqkduHz5sT97uSv8xCDoBUSMDHF0Xv2WddWVBd3WRSG_le65hCSwD_8TKntKRT7noD6vugTwaU3LuXC_msRTZ/s16000/3dK88qLo_400x400.jpg">

    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Les styles restent identiques à la version précédente */
        :root {
            --primary: #c5a059;
            --primary-dark: #a38445;
            --bg-color: #0f172a;
            --overlay: rgba(15, 23, 42, 0.85);
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #f8fafc;
            --text-dim: #94a3b8;
            --card-shadow: rgba(0, 0, 0, 0.5);
        }

        body.light-mode {
            --bg-color: #f1f5f9;
            --overlay: rgba(255, 255, 255, 0.75);
            --glass: rgba(255, 255, 255, 0.8);
            --glass-border: rgba(197, 160, 89, 0.3);
            --text-main: #1e293b;
            --text-dim: #64748b;
            --card-shadow: rgba(0, 0, 0, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; transition: background 0.3s, color 0.3s; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-color); background-image: url('https://images.unsplash.com/photo-1591604129939-f1efa4d9f7fa?q=80&w=2070&auto=format&fit=crop'); background-size: cover; background-position: center; background-attachment: fixed; color: var(--text-main); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 15px; position: relative; }
        body::after { content: ""; position: fixed; inset: 0; background: var(--overlay); z-index: 1; }

        .theme-toggle { position: fixed; top: 20px; right: 20px; z-index: 100; background: var(--glass); border: 1px solid var(--glass-border); color: var(--primary); width: 50px; height: 50px; border-radius: 50%; cursor: pointer; backdrop-filter: blur(10px); display: flex; justify-content: center; align-items: center; font-size: 1.2rem; }

        .main-card { position: relative; z-index: 10; width: 100%; max-width: 420px; background: var(--glass); backdrop-filter: blur(25px); border: 1px solid var(--glass-border); border-radius: 35px; padding: 40px 25px; text-align: center; box-shadow: 0 25px 50px -12px var(--card-shadow); animation: fadeIn 1.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .logo-wrapper { position: relative; width: 150px; height: 150px; margin: 0 auto 25px; }
        .logo-ring { position: absolute; inset: -8px; border: 2px solid var(--primary); border-radius: 50%; opacity: 0.3; animation: pulse 3s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.3; } 50% { transform: scale(1.1); opacity: 0.1; } }
        .logo-img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 4px solid var(--glass-border); background: #fff; }

        .visualizer { display: flex; justify-content: center; align-items: flex-end; gap: 4px; height: 35px; margin-bottom: 20px; }
        .bar { width: 4px; height: 6px; background: var(--primary); border-radius: 3px; }
        .playing .bar { animation: bounce 1s ease-in-out infinite; }
        @keyframes bounce { 0%, 100% { height: 6px; } 50% { height: 30px; } }
        .bar:nth-child(2) { animation-delay: 0.15s; }
        .bar:nth-child(3) { animation-delay: 0.3s; }
        .bar:nth-child(4) { animation-delay: 0.45s; }
        .bar:nth-child(5) { animation-delay: 0.6s; }

        h1 { font-family: 'Amiri', serif; font-size: 2.2rem; color: var(--primary); }
        .subtitle { font-size: 0.85rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 25px; }
        /* 1. État normal (au repos) */
.play-btn { 
    width: 85px; 
    height: 85px; 
    border-radius: 50%; 
    background: var(--primary); 
    border: none; 
    color: white; 
    font-size: 2rem; 
    cursor: pointer; 
    box-shadow: 0 8px 20px rgba(197, 160, 89, 0.4); /* Ombre portée */
    transition: all 0.2s ease; /* Animation fluide pour tous les changements */
    display: flex;
    justify-content: center;
    align-items: center;
}

/* 2. État au survol (souris qui passe dessus) */
.play-btn:hover {
    background: var(--primary-dark); /* Devient un peu plus foncé */
    transform: scale(1.05); /* Grossit très légèrement (5%) */
    box-shadow: 0 10px 25px rgba(197, 160, 89, 0.5); /* L'ombre grandit */
}

/* 3. État actif (quand on clique/pousse) */
.play-btn:active {
    transform: scale(0.95) translateY(4px); /* Se comprime et descend */
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* L'ombre s'écrase */
}
    transform: scale(0.92); /* Réduit la taille à 92% */
    filter: brightness(0.9); /* Assombrit un peu la couleur */
}
        .volume-container { display: flex; align-items: center; gap: 15px; background: rgba(0,0,0,0.1); padding: 12px 20px; border-radius: 100px; margin-top: 25px; }
        input[type="range"] { flex: 1; accent-color: var(--primary); }
        .quran-quote { margin-top: 30px; font-family: 'Amiri', serif; font-size: 1.1rem; color: var(--primary); }
        .quran-quote span { display: block; margin-top: 10px; font-size: 0.8rem; font-family: 'Inter'; color: var(--text-dim); }
        .footer-text { margin-top: 25px; font-size: 0.7rem; color: var(--text-dim); opacity: 0.6; }
        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #ef4444; color: white; padding: 10px 20px; border-radius: 10px; display: none; z-index: 1000; }
    </style>
</head>
<body>

    <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon" id="themeIcon"></i></button>

    <div class="main-card">
        <div class="visualizer" id="visualizer">
            <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </div>

        <div class="logo-wrapper">
            <div class="logo-ring"></div>
            <img src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhwzbQZ3iHzbzjW6-akYWlYamGn1hbWq2_hidaZDTD3I4nIUjhNl4ah9F1T3akY1ZTdSD80KXCKSKCHnOsWHMgFl-VSezptKUZdx5FpVnqnqkduHz5sT97uSv8xCDoBUSMDHF0Xv2WddWVBd3WRSG_le65hCSwD_8TKntKRT7noD6vugTwaU3LuXC_msRTZ/s16000/3dK88qLo_400x400.jpg" alt="Logo" class="logo-img">
        </div>

        <h1 dir="rtl">إِذَاعَةُ القُرْآنِ الكَرِيم</h1>
        <p class="subtitle">Radio Coran - KSA</p>

        <button class="play-btn" id="masterPlayBtn"><i class="fas fa-play" id="playIcon"></i></button>

        <div class="volume-container">
            <i class="fas fa-volume-down" style="color: var(--text-dim)"></i>
            <input type="range" id="volumeCtrl" min="0" max="1" step="0.01" value="0.7">
            <i class="fas fa-volume-up" style="color: var(--text-dim)"></i>
        </div>

        <div class="quran-quote" dir="rtl">
            "وَإِذَا قُرِئَ الْقُرْآنُ فَاسْتَمِعُوا لَهُ وَأَنصِتُوا لَعَلَّكُمْ تُرْحَمُونَ"
            <span dir="ltr">"Quand le Coran est récité, écoutez-le attentivement et observez le silence, afin que vous obteniez la miséricorde"</span>
        </div>
        <p class="footer-text">Direct • Arabie Saoudite</p>
    </div>

    <div id="errorToast" class="toast">Erreur de flux.</div>
    <audio id="audioEngine" preload="none"><source src="https://stream.radiojar.com/4wqre23fytzuv" type="audio/mpeg"></audio>

    <script>
        // --- ENREGISTREMENT DU SERVICE WORKER ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('SW enregistré !'))
                    .catch(err => console.log('Erreur SW', err));
            });
        }

        const audio = document.getElementById('audioEngine');
        const playBtn = document.getElementById('masterPlayBtn');
        const playIcon = document.getElementById('playIcon');
        const visualizer = document.getElementById('visualizer');
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');

        // Thème
        if (localStorage.getItem('theme') === 'light') enableLightMode();
        themeToggle.addEventListener('click', () => document.body.classList.contains('light-mode') ? disableLightMode() : enableLightMode());
        function enableLightMode() { document.body.classList.add('light-mode'); themeIcon.className = 'fas fa-sun'; localStorage.setItem('theme', 'light'); }
        function disableLightMode() { document.body.classList.remove('light-mode'); themeIcon.className = 'fas fa-moon'; localStorage.setItem('theme', 'dark'); }

        // Audio
        playBtn.addEventListener('click', () => {
            if (audio.paused) {
                if (audio.readyState === 0) audio.load();
                audio.play().then(() => updateUI(true)).catch(() => console.log("Erreur"));
            } else {
                audio.pause();
                updateUI(false);
            }
        });

        function updateUI(isPlaying) {
            playIcon.className = isPlaying ? 'fas fa-pause' : 'fas fa-play';
            visualizer.classList.toggle('playing', isPlaying);
        }
        document.getElementById('volumeCtrl').addEventListener('input', (e) => audio.volume = e.target.value);
    </script>
</body>
</html>
